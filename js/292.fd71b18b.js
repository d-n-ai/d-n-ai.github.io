"use strict";(globalThis["webpackChunkquasar_project"]=globalThis["webpackChunkquasar_project"]||[]).push([[292],{1292:(e,a,t)=>{t.r(a),t.d(a,{default:()=>Pa});var i=t(9835),l=t(1957);const o={style:{width:"100%"}},n={style:{width:"100%"}},s={class:"q-pa-sm full-width"};function r(e,a,t,r,m,p){const c=(0,i.up)("app-loader"),d=(0,i.up)("app-preview"),b=(0,i.up)("app-error-photo"),u=(0,i.up)("app-prompt-generator-component"),h=(0,i.up)("q-input"),y=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(y,{class:"row justify-center"},{default:(0,i.w5)((()=>[(0,i._)("div",o,["generation"===e.$root.phase?((0,i.wg)(),(0,i.j4)(c,{key:0})):(0,i.kq)("",!0),"preview"===e.$root.phase?((0,i.wg)(),(0,i.j4)(d,{key:1})):(0,i.kq)("",!0),"errorPhoto"===e.$root.phase?((0,i.wg)(),(0,i.j4)(b,{key:2})):(0,i.kq)("",!0)]),(0,i.wy)((0,i._)("div",n,[(0,i.Wm)(u)],512),[[l.F8,"generation"!==e.$root.phase]]),(0,i.wy)((0,i._)("div",s,[(0,i.Wm)(h,{outlined:"",modelValue:e.$root.apiBaseUrl,"onUpdate:modelValue":a[0]||(a[0]=a=>e.$root.apiBaseUrl=a),label:"API URL"},null,8,["modelValue"])],512),[[l.F8,e.$root.debug]])])),_:1})}var m=t(6970);const p={class:"col-10 q-pa-md items-center gt-xs"},c={class:"row justify-center"},d={class:"col-12 items-center justify-center"},b={class:"row"},u={key:0,class:"text-weight-light"},h={class:"col-6",style:{"padding-right":"5px"}},y={class:"col-6",style:{"padding-left":"5px"}},f={class:"row"},g={class:"col-6",style:{"padding-right":"5px"}},w={class:"col-6",style:{"padding-left":"5px"}},v={class:"q-ma-sm justify-center items-center"},_={class:"q-pa-none q-ma-none text-weight-light",style:{"text-align":"center"}},x=(0,i._)("br",null,null,-1),q={class:"q-ma-sm"},W={class:"q-ma-sm q-mt-md"},k={class:"q-ma-sm justify-center items-center q-pt-sm"},$={class:"q-pa-none q-ma-none text-weight-light",style:{"text-align":"center"}},R=(0,i._)("br",null,null,-1),S={class:"selfie"},j={key:0,style:{display:"flex","flex-direction":"row","justify-content":"flex-start",padding:"5px","margin-bottom":"25px"}},P={style:{display:"flex"}},O={class:"text-weight-medium",style:{"white-space":"nowrap","font-size":"120%"}},C={style:{display:"flex",position:"relative",width:"100%","padding-left":"10px"}},U={class:"col-6 q-mt-md",style:{"padding-left":"5px"}},Z={class:"col-12 q-pa-md items-center xs",style:{"padding-top":"0"}},D={class:"row justify-center"},V={key:0},I={class:"col-12 items-center justify-center"},z={class:"row"},N={key:0,class:"text-weight-light"},A={key:1,class:"full-width"},Q={class:"q-ma-sm justify-center items-center"},T={class:"q-pa-none q-ma-none text-weight-light",style:{"text-align":"center"}},M=(0,i._)("br",null,null,-1),B={class:"q-ma-sm"},F={class:"q-ma-sm q-mt-md"},E={class:"q-ma-sm justify-center items-center q-pt-sm"},G={class:"q-pa-none q-ma-none text-weight-light",style:{"text-align":"center"}},L=(0,i._)("br",null,null,-1),H={class:"selfie"},Y={key:0,style:{display:"flex","flex-direction":"row","justify-content":"flex-start",padding:"5px","margin-bottom":"25px","margin-top":"15px"}},K={style:{display:"flex"}},J={class:"text-weight-medium",style:{"white-space":"nowrap","font-size":"120%"}},X={style:{display:"flex",position:"relative",width:"100%","padding-left":"10px"}},ee={class:"col-6 q-mt-md",style:{"padding-left":"5px"}};function ae(e,a,t,o,n,s){const r=(0,i.up)("q-btn"),ae=(0,i.up)("router-link"),te=(0,i.up)("q-card-section"),ie=(0,i.up)("q-icon"),le=(0,i.up)("q-avatar"),oe=(0,i.up)("q-select"),ne=(0,i.up)("q-input"),se=(0,i.up)("app-selfie"),re=(0,i.up)("q-slider"),me=(0,i.up)("q-card");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",p,[(0,i._)("div",c,[(0,i.Wm)(me,{class:"my-card",style:{width:"100%","max-width":"700px"}},{default:(0,i.w5)((()=>["preview"===e.$root.phase?((0,i.wg)(),(0,i.j4)(te,{key:0},{default:(0,i.w5)((()=>[(0,i._)("div",d,[(0,i._)("div",b,[e.displaySelectSexWarning?((0,i.wg)(),(0,i.iD)("div",u,(0,m.zw)(e.$t("If you want only male/female, return back and choose character gender")),1)):(0,i.kq)("",!0),(0,i._)("div",h,[(0,i.Wm)(r,{color:"primary",label:e.$t("save"),icon:"save",onClick:a[0]||(a[0]=a=>e.downloadImage()),class:"q-ma-sm full-width"},null,8,["label"])]),(0,i._)("div",y,[(0,i.Wm)(r,{color:"primary",label:e.$t("generate new"),"icon-right":"refresh",onClick:a[1]||(a[1]=a=>e.generatePrompt(e.$root.generationBySelfie)),class:"q-ma-sm full-width"},null,8,["label"])])]),(0,i._)("div",f,[(0,i._)("div",g,[(0,i.Wm)(r,{color:"primary",label:e.$t("change parameters"),icon:"chevron_left",onClick:a[2]||(a[2]=a=>e.$root.toSelect()),class:"q-ma-sm full-width"},null,8,["label"])]),(0,i._)("div",w,[(0,i.Wm)(ae,{to:"/character-sheet",class:"full-width"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{color:"primary",label:e.$t("continue"),"icon-right":"navigate_next",class:"q-ma-sm full-width"},null,8,["label"])])),_:1})])])])])),_:1})):((0,i.wg)(),(0,i.j4)(te,{key:1},{default:(0,i.w5)((()=>[(0,i._)("div",v,[(0,i._)("h6",_,[(0,i.Uk)((0,m.zw)(e.$t("Select your character parameters")),1),x,(0,i.Uk)(" "+(0,m.zw)(e.$t("Any parameter can be left empty")),1)])]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.characteristics,(a=>(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",{key:a.name,class:"q-ma-sm"},[(0,i.Wm)(oe,{clearable:"",outlined:"","emit-value":"",modelValue:a.selectedOptionName,"onUpdate:modelValue":e=>a.selectedOptionName=e,options:a.options,"option-value":"name","option-label":e.optionLabel,label:e.$t(a.name),"display-value":e.getDisplayValue(a.options,a.selectedOptionName)},{prepend:(0,i.w5)((()=>[(0,i.Wm)(le,null,{default:(0,i.w5)((()=>[(0,i.Wm)(ie,{name:a.icon},null,8,["name"])])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue","options","option-label","label","display-value"])])),[[l.F8,!a.hidden&&a.options.length]]))),128)),(0,i._)("div",q,[(0,i.Wm)(ne,{outlined:"",modelValue:e.otherParams,"onUpdate:modelValue":a[3]||(a[3]=a=>e.otherParams=a),label:e.$t("other features (optional)")},{prepend:(0,i.w5)((()=>[(0,i.Wm)(ie,{name:"history_edu"})])),_:1},8,["modelValue","label"])]),(0,i._)("div",W,[(0,i.Wm)(r,{color:"primary",label:e.$t("generate"),onClick:a[4]||(a[4]=a=>e.generatePrompt()),class:"full-width"},null,8,["label"])]),(0,i._)("div",k,[(0,i._)("h6",$,[(0,i._)("b",null,(0,m.zw)(e.$t("Generate by selfie")),1),R,(0,i.Uk)(" "+(0,m.zw)(e.$t("All other options will be applied")),1)])]),(0,i._)("div",S,[(0,i.Wm)(se),this.$root.selfieDataUrl?((0,i.wg)(),(0,i.iD)("div",j,[(0,i._)("div",P,[(0,i._)("span",O,(0,m.zw)(e.$t("Selfie impact")),1)]),(0,i._)("div",C,[(0,i.Wm)(re,{label:"","label-always":"","switch-label-side":"","label-color":"grey",modelValue:e.selfieWeightMultiplier,"onUpdate:modelValue":a[5]||(a[5]=a=>e.selfieWeightMultiplier=a),"label-value":e.selfieWeightMultiplier+"%",min:20,max:80,color:"primary"},null,8,["modelValue","label-value"])])])):(0,i.kq)("",!0),(0,i._)("div",U,[(0,i.Wm)(r,{color:"primary",label:e.$t("Generate by selfie"),icon:"portrait",onClick:a[6]||(a[6]=a=>e.generatePrompt(!0)),class:"q-ma-sm full-width",disable:!this.$root.selfieDataUrl},null,8,["label","disable"])])]),(0,i.wy)((0,i._)("p",{style:{color:"#f22"}},(0,m.zw)(e.prompt),513),[[l.F8,e.$root.debug]])])),_:1}))])),_:1})])]),(0,i._)("div",Z,[(0,i._)("div",D,["preview"===e.$root.phase?((0,i.wg)(),(0,i.iD)("div",V,[(0,i._)("div",I,[(0,i._)("div",z,[e.displaySelectSexWarning?((0,i.wg)(),(0,i.iD)("div",N,(0,m.zw)(e.$t("If you want only male/female, return back and choose character gender")),1)):(0,i.kq)("",!0),(0,i.Wm)(r,{color:"primary",label:e.$t("save"),icon:"save",onClick:a[7]||(a[7]=a=>e.downloadImage()),class:"q-ma-sm full-width"},null,8,["label"]),(0,i.Wm)(r,{color:"primary",label:e.$t("generate new"),icon:"refresh",onClick:a[8]||(a[8]=a=>e.generatePrompt(e.$root.generationBySelfie)),class:"q-ma-sm full-width"},null,8,["label"]),(0,i.Wm)(r,{color:"primary",label:e.$t("change parameters"),icon:"chevron_left",onClick:a[9]||(a[9]=a=>e.$root.toSelect()),class:"q-ma-sm full-width"},null,8,["label"]),(0,i.Wm)(ae,{to:"/character-sheet",class:"full-width"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{color:"primary",label:e.$t("continue"),icon:"navigate_next",class:"q-ma-sm full-width"},null,8,["label"])])),_:1})])])])):((0,i.wg)(),(0,i.iD)("div",A,[(0,i._)("div",Q,[(0,i._)("h6",T,[(0,i.Uk)((0,m.zw)(e.$t("Select your character parameters")),1),M,(0,i.Uk)(" "+(0,m.zw)(e.$t("Any parameter can be left empty")),1)])]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.characteristics,(a=>(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",{key:a.name,class:"q-ma-sm"},[(0,i.Wm)(oe,{clearable:"",outlined:"","emit-value":"",modelValue:a.selectedOptionName,"onUpdate:modelValue":e=>a.selectedOptionName=e,options:a.options,"option-value":"name","option-label":e.optionLabel,label:e.$t(a.name),"display-value":e.getDisplayValue(a.options,a.selectedOptionName)},{prepend:(0,i.w5)((()=>[(0,i.Wm)(le,null,{default:(0,i.w5)((()=>[(0,i.Wm)(ie,{name:a.icon},null,8,["name"])])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue","options","option-label","label","display-value"])])),[[l.F8,!a.hidden&&a.options.length]]))),128)),(0,i._)("div",B,[(0,i.Wm)(ne,{outlined:"",modelValue:e.otherParams,"onUpdate:modelValue":a[10]||(a[10]=a=>e.otherParams=a),label:e.$t("other features (optional)")},{prepend:(0,i.w5)((()=>[(0,i.Wm)(ie,{name:"history_edu"})])),_:1},8,["modelValue","label"])]),(0,i._)("div",F,[(0,i.Wm)(r,{color:"primary",label:e.$t("generate"),onClick:a[11]||(a[11]=a=>e.generatePrompt()),class:"full-width"},null,8,["label"])]),(0,i._)("div",E,[(0,i._)("h6",G,[(0,i._)("b",null,(0,m.zw)(e.$t("Generate by selfie")),1),L,(0,i.Uk)(" "+(0,m.zw)(e.$t("All other options will be applied")),1)])]),(0,i._)("div",H,[(0,i.Wm)(se),this.$root.selfieDataUrl?((0,i.wg)(),(0,i.iD)("div",Y,[(0,i._)("div",K,[(0,i._)("span",J,(0,m.zw)(e.$t("Selfie impact")),1)]),(0,i._)("div",X,[(0,i.Wm)(re,{label:"","label-always":"","switch-label-side":"","label-color":"grey",modelValue:e.selfieWeightMultiplier,"onUpdate:modelValue":a[12]||(a[12]=a=>e.selfieWeightMultiplier=a),"label-value":e.selfieWeightMultiplier+"%",min:20,max:80,color:"primary"},null,8,["modelValue","label-value"])])])):(0,i.kq)("",!0),(0,i._)("div",ee,[(0,i.Wm)(r,{color:"primary",label:e.$t("Generate by selfie"),icon:"portrait",onClick:a[13]||(a[13]=a=>e.generatePrompt(!0)),class:"q-ma-sm full-width",disable:!this.$root.selfieDataUrl},null,8,["label","disable"])])]),(0,i.wy)((0,i._)("p",{style:{color:"#f22"}},(0,m.zw)(e.prompt),513),[[l.F8,e.$root.debug]])]))])])],64)}const te=[{name:"empty",nameRu:"empty",probability:.3,impacts:[{name:"",probability:1}],optionalImpacts:[]},{name:"dnd character",nameRu:"dnd character",probability:.7,impacts:[{name:"dnd character",probability:1}],optionalImpacts:[]}],ie=[],le=[{name:"elf",selfieWeight:.4,nameRu:"эльф",probability:10,impacts:[{name:"elf",probability:1}]},{name:"human",selfieWeight:.4,nameRu:"человек",probability:5,impacts:[{name:"human",probability:.2},{name:"",probability:.8}]},{name:"tabaxi",selfieWeight:.4,nameRu:"табакси",probability:5,impacts:[{name:"tabaxi",probability:1}]},{name:"tiefling",selfieWeight:.4,nameRu:"тифлинг",probability:3,impacts:[{name:"tiefling",probability:1}]},{name:"halfling",selfieWeight:.4,nameRu:"полурослик",probability:2,impacts:[{name:"halfling",probability:1}]},{name:"gnome",selfieWeight:.4,nameRu:"гном",probability:2,impacts:[{name:"gnome",probability:1}]},{name:"dwarf",selfieWeight:.4,nameRu:"дварф",probability:2,impacts:[{name:"dwarf",probability:1}]},{name:"goliath",selfieWeight:.4,nameRu:"гоблин",probability:2,impacts:[{name:"goliath",probability:1}]},{name:"half-orc",selfieWeight:.4,nameRu:"полуорк",probability:1,impacts:[{name:"half-orc",probability:1}]},{name:"kobold",selfieWeight:.3,nameRu:"кобольд",probability:1,impacts:[{name:"kobold",probability:1},{name:"kobold with red scales",probability:1}]},{name:"orc",selfieWeight:.4,nameRu:"орк",probability:1,impacts:[{name:"orc",probability:1}]},{name:"dragonborn",selfieWeight:.3,nameRu:"драконорождённый",probability:1,impacts:[{name:"dragonborn",probability:1}]},{name:"half-elf",selfieWeight:.4,nameRu:"полуэльф",probability:1,impacts:[{name:"half-elf",probability:1}]},{name:"aasimar",selfieWeight:.4,nameRu:"аасимар",probability:.5,impacts:[{name:"angel",probability:1}]},{name:"goblin",selfieWeight:.4,nameRu:"гоблин",probability:.5,impacts:[{name:"goblin",probability:1}]},{name:"aarakocra",selfieWeight:.2,nameRu:"ааракокра",probability:.2,impacts:[{name:"dnd character aarakocra",probability:1}]},{name:"harengon",selfieWeight:.4,nameRu:"зайцегон",probability:.3,impacts:[{name:"half human half hare",probability:1},{name:"half human half rabbit",probability:1}]},{name:"kenku",selfieWeight:.4,nameRu:"кенку",probability:.2,impacts:[{name:"kenku",probability:1}]},{name:"centaur",selfieWeight:.2,nameRu:"кентавр",probability:.2,impacts:[{name:"centaur",probability:1}]},{name:"satyr",selfieWeight:.5,nameRu:"сатир",probability:.2,impacts:[{name:"satyr",probability:1}]},{name:"triton",selfieWeight:.4,nameRu:"тритон",probability:.2,impacts:[{name:"triton",probability:1}]},{name:"yuan-ti",selfieWeight:.5,nameRu:"юань-ти",probability:.2,impacts:[{name:"yuan-ti",probability:1}]},{name:"owlin",selfieWeight:.3,nameRu:"совлин",probability:.2,impacts:[{name:"dnd character owl",probability:1}]},{name:"grung (toad-human)",selfieWeight:.3,nameRu:"грунг (человек-жаба)",probability:.2,impacts:[{name:"dnd character toad",probability:1},{name:"dnd character frog",probability:1}]}],oe=["owlin","kenku","dragonborn","grung (toad-human)","kobold"],ne=[{name:"bard",nameRu:"бард",probability:2,impacts:[{name:"bard",probability:1}]},{name:"barbarian",nameRu:"варвар",probability:2,impacts:[{name:"barbarian",probability:.2}]},{name:"fighter",nameRu:"воин",probability:5,impacts:[{name:"fighter",probability:1},{name:"warrior",probability:1},{name:"knight in shining armor",probability:1}]},{name:"wizard",nameRu:"волшебник",probability:3,impacts:[{name:"wizard",probability:1}]},{name:"druid",nameRu:"друид",probability:2,impacts:[{name:"druid",probability:1}]},{name:"cleric",nameRu:"жрец",probability:2,impacts:[{name:"cleric",probability:2},{name:"preacher",probability:1}]},{name:"artificer",nameRu:"изобретатель",probability:1,impacts:[{name:"artificer",probability:1}]},{name:"warlock",nameRu:"колдун",probability:2,impacts:[{name:"warlock",probability:1},{name:"witch",probability:1}]},{name:"monk",nameRu:"монах",probability:2,impacts:[{name:"monk",probability:1},{name:"shaolin monk",probability:1}]},{name:"paladin",nameRu:"паладин",probability:2,impacts:[{name:"paladin",probability:1},{name:"paladin in heavy armor",probability:1},{name:"knight in shining armor",probability:1}]},{name:"rogue",nameRu:"плут",probability:3,impacts:[{name:"rogue in black close",probability:1},{name:"rogue in black hood",probability:2},{name:"rogue",probability:1}]},{name:"ranger",nameRu:"следопыт",probability:2,impacts:[{name:"ranger",probability:1},{name:"dexterous ranger",probability:1}]},{name:"sorcerer",nameRu:"чародей",probability:2,impacts:[{name:"sorcerer",probability:1}]}],se=[{name:"male",nameRu:"мужской",probability:.5,impacts:[{name:"man",probability:.3},{name:"cute boy",probability:.3},{name:"dude",probability:.2},{name:"guy",probability:.2}],optionalImpacts:[{name:"strong",probability:.3},{name:"big",probability:.2},{name:"sexy",probability:.3},{name:"funny",probability:.1}]},{name:"girl",nameRu:"женский",probability:.5,impacts:[{name:"girl",probability:.7},{name:"lady",probability:.1},{name:"women",probability:.1},{name:"female",probability:.1}],optionalImpacts:[{name:"strong",probability:.1},{name:"cute",probability:.4},{name:"sexy",probability:.7},{name:"funny",probability:.2}]}],re=[{name:"good",nameRu:"доброе",probability:.34,impacts:[],optionalImpacts:[{name:"good",probability:.3},{name:"righteous",probability:.1},{name:"kind",probability:.3},{name:"submissive",probability:.2},{name:"gentle",probability:.4},{name:"merciful",probability:.2},{name:"holly",probability:.3},{name:"holly",probability:.3}]},{name:"neutral",nameRu:"нейтральное",probability:.33,impacts:[],optionalImpacts:[]},{name:"evil",nameRu:"злое",probability:.33,impacts:[],optionalImpacts:[{name:"evil",probability:.3},{name:"wicked",probability:.3},{name:"hot",probability:.6},{name:"sinful",probability:.4}]}],me=[{name:"lawful",nameRu:"законопослушный",probability:.34,impacts:[],optionalImpacts:[{name:"calm",probability:.4},{name:"quiet",probability:.1},{name:"confident",probability:.4}]},{name:"neutral",nameRu:"нейтральный",probability:.33,impacts:[],optionalImpacts:[]},{name:"chaotic",nameRu:"хаотичный",probability:.33,impacts:[],optionalImpacts:[{name:"chaotic",probability:.2},{name:"crazy",probability:.6},{name:"horny",probability:.4}]}],pe=[{name:"normal",nameRu:"обычный",probability:.7,impacts:[{name:", 4k photo",probability:1}],optionalImpacts:[]},{name:"anime",nameRu:"аниме",probability:.2,impacts:[{name:", 4k anime",probability:.5},{name:", 4k in style of naruto",probability:.5}],optionalImpacts:[]},{name:"cyberpunk",nameRu:"киберпанк",probability:.05,impacts:[{name:", 4k cyberpunk",probability:1}],optionalImpacts:[]},{name:"poster",nameRu:"постер",probability:.05,impacts:[{name:", ussr propaganda poster",probability:1}],optionalImpacts:[]}],ce="doe";var de=t(499);const be={width:"512",height:"512",ref:"canvas",style:{width:"512px !important",height:"512px !important",display:"none"}},ue={class:"justify-center items-center",style:{"padding-bottom":"0","margin-bottom":"0",display:"flex","flex-direction":"column",width:"100%"}},he={style:{position:"relative",display:"flex","justify-content":"center"}},ye=["src"],fe={class:"button-container last-selfie-wrapper",style:{position:"absolute",top:"0",display:"flex","align-items":"flex-start","justify-content":"flex-end"}},ge={class:"text-h6"},we={ref:"video",class:"shadow-3",style:{width:"100%","max-width":"512px","max-height":"inherit","border-radius":"5px",transform:"scaleX(-1)"},autoplay:""},ve={class:"selfie-line"};function _e(e,a,t,o,n,s){const r=(0,i.up)("q-btn"),p=(0,i.up)("q-space"),c=(0,i.up)("q-card-section"),d=(0,i.up)("q-card"),b=(0,i.up)("q-dialog"),u=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("canvas",be,null,512),(0,i._)("div",ue,[(0,i.wy)((0,i._)("div",he,[(0,i._)("div",{class:"photo",onClick:a[0]||(a[0]=a=>e.openSelfiePopup())}),(0,i.Wm)(r,{flat:"",color:"white",label:e.$t("take a selfie"),icon:"photo_camera",onClick:a[1]||(a[1]=a=>e.openSelfiePopup()),class:"q-ma-sm",style:{position:"absolute",bottom:"20px"}},null,8,["label"])],512),[[l.F8,!e.$root.selfieDataUrl]]),(0,i.wy)((0,i._)("div",{class:"last-selfie-wrapper",onClick:a[4]||(a[4]=a=>e.openSelfiePopup()),style:{display:"flex","justify-content":"center"}},[(0,i._)("img",{id:"last-selfie",class:"last-selfie-wrapper",src:e.$root.selfieDataUrl,width:"100%"},null,8,ye),(0,i._)("div",fe,[(0,i.Wm)(r,{round:"",flat:"",icon:"close",padding:"sm",style:{margin:"5px"},onClick:a[2]||(a[2]=(0,l.iM)((a=>e.removeSelfie()),["stop"]))})]),(0,i.Wm)(r,{outline:"",color:"white",label:e.$t("change selfie"),icon:"photo_camera",onClick:a[3]||(a[3]=a=>e.openSelfiePopup()),class:"q-ma-sm",style:{position:"absolute",bottom:"0"}},null,8,["label"])],512),[[l.F8,e.$root.selfieDataUrl]])]),(0,i.Wm)(b,{maximized:"",modelValue:e.popup,"onUpdate:modelValue":a[6]||(a[6]=a=>e.popup=a),class:"",onHide:a[7]||(a[7]=a=>e.popupClosed())},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{class:"column",style:{"flex-wrap":"nowrap",overflow:"hidden"}},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"row items-center q-pt-sm q-pb-none"},{default:(0,i.w5)((()=>[(0,i._)("div",ge,(0,m.zw)(e.$t("selfie")),1),(0,i.Wm)(p),(0,i.wy)((0,i.Wm)(r,{icon:"close",flat:"",round:"",dense:""},null,512),[[u]])])),_:1}),(0,i.Wm)(c,{class:"items-center q-pt-sm",style:{position:"relative",display:"flex","justify-content":"center"}},{default:(0,i.w5)((()=>[(0,i.wy)((0,i._)("video",we,null,512),[[l.F8,null!==e.stream]]),(0,i.wy)((0,i._)("div",ve,null,512),[[l.F8,null!==e.stream]]),(0,i.wy)((0,i._)("h6",null,(0,m.zw)(e.$t("Getting access to camera")),513),[[l.F8,null===e.stream]])])),_:1}),(0,i.wy)((0,i.Wm)(c,{class:"row justify-center items-center q-pt-none q-mt-none",style:{bottom:"0",position:"absolute",margin:"auto",width:"100%"}},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{color:"primary",label:e.$t("take a selfie"),icon:"photo_camera",onClick:a[5]||(a[5]=a=>e.makeSelfie()),class:"q-ma-sm q-mt-none"},null,8,["label"])])),_:1},512),[[l.F8,null!==e.stream]])])),_:1})])),_:1},8,["modelValue"])],64)}const xe=(0,i.aZ)({name:"AppSelfie",data(){return{popup:!1,stream:null}},methods:{async openSelfiePopup(){this.popup=!0,this.stream=await navigator.mediaDevices.getUserMedia({video:{width:512,height:512},audio:!1}),this.$refs.video.srcObject=this.stream},async makeSelfie(){const e=this.$refs.canvas.getContext("2d");e.scale(-1,1),e.drawImage(this.$refs.video,0,0,-512,512);const a=this.$refs.canvas.toDataURL("image/jpeg");e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,this.$refs.canvas.width,this.$refs.canvas.height),this.$root.selfieDataUrl=a,localStorage.setItem("selfie",this.$root.selfieDataUrl),this.$root.uploadSelfieToSupabase(),this.popup=!1},removeSelfie(){this.$root.selfieDataUrl=null,localStorage.removeItem("selfie")},popupClosed(){this.stream.getTracks().forEach((function(e){e.stop()})),window.setTimeout((()=>{this.stream.getTracks().forEach((function(e){e.stop()})),this.stream=null}),100)}},computed:{}});var qe=t(1639),We=t(9379),ke=t(7743),$e=t(4458),Re=t(3190),Se=t(136),je=t(2146),Pe=t(9984),Oe=t.n(Pe);const Ce=(0,qe.Z)(xe,[["render",_e],["__scopeId","data-v-d94e3668"]]),Ue=Ce;async function Ze(e){const a=await fetch(e).then((e=>e.blob()));return URL.createObjectURL(a)}async function De(e){const a=document.createElement("a");a.href=await Ze(e),a.download="character.png",document.body.appendChild(a),a.click(),document.body.removeChild(a)}Oe()(xe,"components",{QBtn:We.Z,QDialog:ke.Z,QCard:$e.Z,QCardSection:Re.Z,QSpace:Se.Z}),Oe()(xe,"directives",{ClosePopup:je.Z});const Ve=(0,i.aZ)({name:"AppPromptGeneratorComponent",components:{AppSelfie:Ue},data(){return{prompt:"",otherParams:"",otherParamsTranslated:"",selfieWeight:1,selfieWeightMultiplier:50,insertOtherParamsBefore:"style",characteristics:[{name:"common before",selectedOptionName:"",hidden:!0,options:te},{name:"race",icon:"people_alt",selectedOptionName:"",options:le},{name:"class",icon:"sports_gymnastics",selectedOptionName:"",options:ne},{name:"sex",icon:"transgender",selectedOptionName:"",options:se},{name:"goodness",icon:"volunteer_activism",selectedOptionName:"",options:re},{name:"chaoticness",icon:"psychology_alt",selectedOptionName:"",options:me},{name:"style",icon:"brush",selectedOptionName:"",options:pe},{name:"common after",selectedOptionName:"",hidden:!0,options:ie}],generatedCharacteristicsOptions:[]}},methods:{async generatePrompt(e=!1){if(this.prompt="",this.selfieWeight=1,this.otherParamsTranslated=await this.translatePrompt(this.otherParams),this.selectOptions(),this.generatePromptBySelectOptions(),this.selfieWeight*=(this.selfieWeightMultiplier/50)**1.5,this.fixPrompt(e),!e)return await this.$root.createPhoto(this.prompt);this.$root.selfieDataUrl&&await this.$root.createPhotoBySelfie(this.prompt,Math.round(100*this.selfieWeight))},async translatePrompt(e){const a=/[а-яё]/i;if(a.test(e)){const a=await fetch("https://libretranslate.de/translate",{method:"POST",body:JSON.stringify({q:e,source:"ru",target:"en",format:"text",api_key:""}),headers:{"Content-Type":"application/json"}}),t=await a.json();return console.log("result.translatedText",t.translatedText),t.translatedText||""}return e},fixPrompt(e=!1){const a=this.characteristics.find((e=>"sex"===e.name)),t=a?.selectedOptionName,i=this.characteristics.find((e=>"race"===e.name)),l=i?.selectedOptionName;e&&"girl"===t&&oe.includes(l)&&(this.prompt=this.prompt.replaceAll("girl",ce),this.prompt=this.prompt.replaceAll("lady",ce),this.prompt=this.prompt.replaceAll("women",ce),this.prompt=this.prompt.replaceAll("female",ce)),this.prompt=this.prompt.replaceAll("  "," "),this.prompt=this.prompt.replaceAll(" ,",","),this.prompt=this.prompt.trim()},selectOptions(){this.generatedCharacteristicsOptions=[],this.characteristics.forEach((e=>{const a=this.selectOptionOfCharacteristic(e);this.generatedCharacteristicsOptions.push(a)}))},selectOptionOfCharacteristic(e){if(!e.options.length)return{name:e.name,selectedOptionName:e.selectedOptionName,hidden:e.hidden};if(""!==e.selectedOptionName){const a=e.options.find((a=>a.name===e.selectedOptionName));if(a)return{name:e.name,selectedOptionName:e.selectedOptionName,hidden:e.hidden,option:a}}const a=this.getRandomVariant(e.options);return{name:e.name,selectedOptionName:e.selectedOptionName,hidden:e.hidden,option:a}},generatePromptBySelectOptions(){this.generatedCharacteristicsOptions.forEach((e=>{if(e.name===this.insertOtherParamsBefore&&(this.prompt=`${this.prompt}${this.otherParamsTranslated.trim()} `),!e.option)return;if(console.log("characteristic.option",e.option),e.option?.selfieWeight&&(this.selfieWeight=this.selfieWeight*e.option.selfieWeight),e.option.optionalImpacts?.forEach((e=>{Math.random()>e.probability||(this.prompt=`${this.prompt}${e.name} `)})),!e.option.impacts?.length)return;const a=this.getRandomVariant(e.option.impacts);this.prompt=`${this.prompt}${a.name} `}))},getRandomVariant(e){let a=0;e.forEach((e=>a+=e.probability)),a=Math.round(1e4*a)/1e4,1!==a&&console.log("Warning! probabilitiesSum not equal to 1",(0,de.IU)(e));let t=Math.random()*a,i=null;return e.forEach((e=>{!i&&t<e.probability&&(i=e),t-=e.probability})),i??e[0]},async downloadImage(){await De(this.$root.photoUrl)},getDisplayValue(e,a){const t=this.$root.locale;if("en-US"===t)return a;let i="";return e.forEach((e=>{e.name===a&&(i=e.nameRu)})),i}},computed:{optionLabel(){return"ru"===this.$root.locale?"nameRu":"name"},displaySelectSexWarning(){if(!this.$root.generationBySelfie)return!1;const e=this.characteristics.find((e=>"sex"===e.name));return""==e?.selectedOptionName}}});var Ie=t(4431),ze=t(1357),Ne=t(2857),Ae=t(1852),Qe=t(6393);const Te=(0,qe.Z)(Ve,[["render",ae]]),Me=Te;Oe()(Ve,"components",{QCard:$e.Z,QCardSection:Re.Z,QBtn:We.Z,QSelect:Ie.Z,QAvatar:ze.Z,QIcon:Ne.Z,QInput:Ae.Z,QSlider:Qe.Z});const Be={class:"col-10 q-pa-md gt-xs"},Fe={class:"row justify-center"},Ee={class:"row items-center justify-evenly"},Ge={class:"col-12 q-pa-md xs"},Le={class:"row justify-center"},He={class:"row items-center justify-evenly"};function Ye(e,a,t,l,o,n){const s=(0,i.up)("q-spinner-gears"),r=(0,i.up)("q-card");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",Be,[(0,i._)("div",Fe,[(0,i.Wm)(r,{class:"my-card items-center q-pa-md",style:{width:"100%","max-width":"700px"}},{default:(0,i.w5)((()=>[(0,i._)("div",Ee,[(0,i.Wm)(s,{color:"cyan",size:"10em"})])])),_:1})])]),(0,i._)("div",Ge,[(0,i._)("div",Le,[(0,i._)("div",He,[(0,i.Wm)(s,{color:"cyan",size:"10em"})])])])],64)}const Ke=(0,i.aZ)({name:"AppPromptGeneratorComponent",data(){return{}},methods:{},computed:{}});var Je=t(9120);const Xe=(0,qe.Z)(Ke,[["render",Ye]]),ea=Xe;Oe()(Ke,"components",{QCard:$e.Z,QSpinnerGears:Je.Z});const aa={class:"col-10 q-pt-md q-pr-md q-pl-md items-center gt-xs",style:{"padding-bottom":"0","margin-bottom":"0"}},ta={class:"row justify-center"},ia={class:"items-center",style:{"background-color":"#e5e5e5",width:"100%","aspect-ratio":"1",position:"absolute"}},la={class:"row items-center justify-evenly q-pa-md"},oa=["src"],na={class:"col-12 xs"},sa={class:"row justify-center"},ra={class:"items-center",style:{width:"100%","aspect-ratio":"1",position:"absolute"}},ma={class:"row items-center justify-evenly q-pa-md"},pa=["src"];function ca(e,a,t,l,o,n){const s=(0,i.up)("q-spinner-gears"),r=(0,i.up)("q-card");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",aa,[(0,i._)("div",ta,[(0,i.Wm)(r,{class:"items-center",style:{width:"100%","max-width":"700px"}},{default:(0,i.w5)((()=>[(0,i._)("div",ia,[(0,i._)("div",la,[(0,i.Wm)(s,{color:"cyan",size:"10em"})])]),(0,i._)("img",{src:e.$root.photoUrl,style:{width:"100%","aspect-ratio":"1",position:"relative","border-radius":"5px"}},null,8,oa)])),_:1})])]),(0,i._)("div",na,[(0,i._)("div",sa,[(0,i._)("div",ra,[(0,i._)("div",ma,[(0,i.Wm)(s,{color:"cyan",size:"10em"})])]),(0,i._)("img",{src:e.$root.photoUrl,style:{width:"100%","aspect-ratio":"1",position:"relative"}},null,8,pa)])])],64)}const da=(0,i.aZ)({name:"AppPromptGeneratorComponent",data(){return{}},methods:{},computed:{}}),ba=(0,qe.Z)(da,[["render",ca]]),ua=ba;Oe()(da,"components",{QCard:$e.Z,QSpinnerGears:Je.Z});const ha={class:"col-10 q-pa-md items-center"},ya={class:"row justify-center"},fa={class:"items-center",style:{width:"100%"}},ga={class:"row items-center justify-evenly q-pa-md"},wa={class:"col-12 items-center justify-center"},va={class:"row items-center justify-center q-pa-xs q-ma-xs"},_a=(0,i._)("div",{class:"row items-center justify-center q-pa-xs q-ma-xs"},[(0,i._)("h3",{class:"q-pa-xs q-ma-xs"},"Server error")],-1),xa=(0,i._)("div",{class:"row items-center justify-center q-pa-xs q-ma-xs"},[(0,i._)("h6",{class:"q-pa-xs q-ma-xs"},"try again later")],-1);function qa(e,a,t,l,o,n){const s=(0,i.up)("q-icon"),r=(0,i.up)("q-card");return(0,i.wg)(),(0,i.iD)("div",ha,[(0,i._)("div",ya,[(0,i.Wm)(r,{class:"items-center",style:{width:"100%","max-width":"700px"}},{default:(0,i.w5)((()=>[(0,i._)("div",fa,[(0,i._)("div",ga,[(0,i._)("div",wa,[(0,i._)("div",va,[(0,i.Wm)(s,{class:"q-pa-xs q-ma-xs",name:"warning",color:"red",size:"10em"})]),_a,xa])])])])),_:1})])])}const Wa=(0,i.aZ)({name:"AppErrorPhoto",data(){return{}},methods:{},computed:{}}),ka=(0,qe.Z)(Wa,[["render",qa]]),$a=ka;Oe()(Wa,"components",{QCard:$e.Z,QIcon:Ne.Z});const Ra=(0,i.aZ)({name:"IndexPage",components:{AppPromptGeneratorComponent:Me,AppLoader:ea,AppPreview:ua,AppErrorPhoto:$a},data(){return{}}});var Sa=t(9885);const ja=(0,qe.Z)(Ra,[["render",r]]),Pa=ja;Oe()(Ra,"components",{QPage:Sa.Z,QInput:Ae.Z})}}]);